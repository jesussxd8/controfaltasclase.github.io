<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Control de Faltas</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script type="module" src="script.js" defer></script>
</head>
<body>
  <!-- Loader -->
  <div id="loader" class="loader">
    <div class="spinner"></div>
  </div>

  <header>
    <h1>ğŸ“š Control de Faltas</h1>
    <div class="header-buttons">
      <button id="toggleTheme" title="Cambiar tema">ğŸŒ™</button>
      <button id="btnLogout" class="oculto">Cerrar sesiÃ³n</button>
    </div>
  </header>

  <main>
    <!-- Login -->
    <section id="loginSection" class="card centrado">
      <h2>Bienvenido</h2>
      <p>Inicia sesiÃ³n con tu cuenta de Google para continuar</p>
      <button id="btnLogin" class="btn-primary">Iniciar sesiÃ³n con Google</button>
    </section>

    <!-- App principal -->
    <section id="appSection" class="card oculto">
      <div class="form-control centrado">
        <label for="fechaFalta">Selecciona una fecha:</label>
        <input type="date" id="fechaFalta" />
      </div>

      <div id="asignaturasDelDia" class="centrado"></div>

      <div class="botonera">
        <button id="btnRegistrar" class="btn-primary">Registrar faltas</button>
        <button id="btnReiniciar" class="btn-secondary">Reiniciar</button>
        <button id="btnExportar" class="btn-accent">ğŸ“¤ Exportar</button>

        <label class="custom-file-button">
          ğŸ“¥ Importar JSON
          <input type="file" id="inputImportJson" accept=".json" class="hidden-file-input" />
        </label>

        <label class="custom-file-button">
          ğŸ“¥ Importar TXT
          <input type="file" id="inputImportTxt" accept=".txt" class="hidden-file-input" />
        </label>
      </div>

      <h2 class="centrado">Resumen de Faltas</h2>
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Asignatura</th>
              <th>Faltas</th>
              <th>MÃ¡ximo</th>
              <th>Restantes</th>
            </tr>
          </thead>
          <tbody id="tablaResumen"></tbody>
        </table>
      </div>

      <div class="grafico-container">
        <canvas id="graficoFaltas"></canvas>
      </div>

      <h2 class="centrado">ğŸ“… Historial de Faltas</h2>
      <div id="historialContainer" class="historial"></div>
    </section>
  </main>

  <div id="toast" class="toast"></div>

  <footer>
    <p>Hecho con â¤ï¸ y Firebase â€” 2025</p>
  </footer>
</body>
</html>
