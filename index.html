<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Control de Faltas</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script type="module" src="script.js" defer></script>
</head>

<body>
  <div id="loader" class="loader"><div class="spinner"></div></div>

  <header>
    <h1>ğŸ“š Control de Faltas</h1>
    <div class="header-buttons">
      <button id="toggleTheme">ğŸŒ™</button>
      <button id="btnLogout" class="oculto">Cerrar sesiÃ³n</button>
    </div>
  </header>

  <main>
    <!-- LOGIN -->
    <section id="loginSection" class="card centrado">
      <h2>Bienvenido</h2>
      <p>Inicia sesiÃ³n con tu cuenta de Google para continuar</p>
      <button id="btnLogin" class="btn-primary">Iniciar sesiÃ³n con Google</button>
    </section>

    <!-- APP PRINCIPAL -->
    <section id="appSection" class="card oculto">
      <div class="centrado">
        <button id="btnEditarHorario" class="btn-accent">ğŸ—“ï¸ Editar mi horario y lÃ­mites</button>
      </div>

      <div class="form-control centrado">
        <label for="fechaFalta">Selecciona una fecha:</label>
        <input type="date" id="fechaFalta" />
      </div>

      <div id="asignaturasDelDia" class="centrado"></div>

      <div class="botonera">
        <div class="botonera-fila">
          <button id="btnRegistrar" class="btn-primary">Registrar faltas</button>
          <button id="btnReiniciar" class="btn-secondary">Reiniciar</button>
        </div>

        <div class="botonera-fila">
          <button id="btnExportar" class="btn-accent">ğŸ“¤ Exportar JSON</button>
          <button id="btnExportarPDF" class="btn-accent">ğŸ“„ Exportar PDF</button>
          <button id="btnExportarCSV" class="btn-secondary">ğŸ“Š Exportar CSV</button>
        </div>

        <div class="botonera-fila">
          <label class="custom-file-button">
            ğŸ“¥ Importar JSON
            <input type="file" id="inputImportJson" accept=".json" class="hidden-file-input" />
          </label>
          <label class="custom-file-button">
            ğŸ“¥ Importar TXT
            <input type="file" id="inputImportTxt" accept=".txt" class="hidden-file-input" />
          </label>
        </div>
      </div>

      <h2 class="centrado">Resumen de Faltas</h2>
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Asignatura</th>
              <th>Faltas</th>
              <th>MÃ¡ximo</th>
              <th>Restantes</th>
            </tr>
          </thead>
          <tbody id="tablaResumen"></tbody>
        </table>
      </div>

      <div id="historialFaltas" class="historial"></div>

      <div class="grafico-container">
        <div class="grafico-opciones centrado">
          <label>Tipo de grÃ¡fico:</label>
          <select id="tipoGrafico">
            <option value="bar">Barras</option>
            <option value="doughnut">Dona</option>
            <option value="line">LÃ­neas</option>
          </select>
        </div>
        <canvas id="graficoFaltas"></canvas>
      </div>
    </section>
  </main>

  <!-- MODAL DE HORARIO -->
  <div id="modalHorario" class="modal oculto">
    <div class="modal-content">
      <h2>ğŸ—“ï¸ Editar horario y lÃ­mites</h2>
      <p>Agrega asignaturas por dÃ­a (puedes repetir la misma asignatura varias veces si la tienes en diferentes horas).</p>
      <div id="horarioTabs" class="tabs"></div>
      <div id="contenidoHorario"></div>
      <div class="centrado">
        <button id="btnGuardarHorario" class="btn-primary">ğŸ’¾ Guardar</button>
        <button id="btnCerrarModal" class="btn-secondary">âŒ Cerrar</button>
      </div>
    </div>
  </div>

  <div id="toast" class="toast"></div>

  <footer>
    <p>Hecho con â¤ï¸ y Firebase â€” 2025</p>
  </footer>
</body>
</html>
